# Projeto: API de Monitoramento da Qualidade da Ãgua

[![Status](https://img.shields.io/badge/status-funcional-green)](https://shields.io/)
[![Tecnologia](https://img.shields.io/badge/tecnologia-Docker-blue)](https://shields.io/)

SoluÃ§Ã£o de backend completa para monitorar a qualidade da Ã¡gua de praias, ideal para demonstraÃ§Ãµes e protÃ³tipos, com integraÃ§Ã£o pronta para o MIT App Inventor.

---

### ğŸ¯ Objetivo

Facilitar o monitoramento da qualidade da Ã¡gua de praias atravÃ©s de uma API RESTful, conectando dados de sensores a um aplicativo mÃ³vel de fÃ¡cil acesso, e automatizando a geraÃ§Ã£o de alertas para a comunidade.

### ğŸ—ï¸ Arquitetura

A aplicaÃ§Ã£o Ã© totalmente conteinerizada com Docker, permitindo uma configuraÃ§Ã£o e execuÃ§Ã£o simplificada em qualquer ambiente.

* **API RESTful (`api`):** Backend em Python/FastAPI que serve como o cÃ©rebro do sistema. Processa requisiÃ§Ãµes, gerencia o banco de dados e executa a lÃ³gica de alertas.
* **Banco de Dados (`db`):** ContÃªiner PostgreSQL para armazenamento persistente de praias, leituras de sensores e histÃ³rico de alertas.
* **Simulador (`simulator`):** ServiÃ§o em Python que gera dados realistas de praias conhecidas e os envia para a API, simulando sensores em campo.
* **Consumo (`mobile`):** A API Ã© projetada para ser consumida por qualquer cliente HTTP, com foco no **MIT App Inventor** para prototipagem rÃ¡pida.

### ğŸš€ Funcionalidades

* âœ… **IngestÃ£o de Dados:** Endpoint para receber leituras de sensores (ex: nÃ­vel de enterococos).
* âœ… **Simulador AutÃ´nomo:** Gera dados realistas de praias conhecidas (Copacabana, Gonzaga, etc.) e envia para a API.
* âœ… **Processamento de Alertas:** Rotina automÃ¡tica que analisa os dados e gera alertas (Verde, Amarelo, Vermelho) com mensagens amigÃ¡veis para o usuÃ¡rio final.
* âœ… **Consulta de Dados:** Endpoints para listar praias cadastradas e os alertas gerados.
* âœ… **DocumentaÃ§Ã£o Interativa:** Interface Swagger UI (`/docs`) para explorar e testar a API.

### ğŸ› ï¸ Tecnologias

* **Backend:** Python 3.11, FastAPI, Uvicorn
* **Banco de Dados:** PostgreSQL 15
* **ORM e ValidaÃ§Ã£o:** SQLAlchemy, Pydantic
* **Tarefas em Background:** APScheduler
* **Infraestrutura:** Docker, Docker Compose
* **Cliente Mobile:** MIT App Inventor

### ğŸ“ Estrutura do Projeto

projeto-praias/
â”œâ”€â”€ api/                   # Backend FastAPI
â”‚   â”œâ”€â”€ main.py            # Endpoints da API e lÃ³gica principal
â”‚   â”œâ”€â”€ models.py          # Modelos de dados do SQLAlchemy
â”‚   â”œâ”€â”€ schemas.py         # Esquemas de validaÃ§Ã£o do Pydantic
â”‚   â”œâ”€â”€ alerts.py          # LÃ³gica do serviÃ§o de alertas
â”‚   â”œâ”€â”€ database.py        # ConfiguraÃ§Ã£o do banco de dados
â”‚   â”œâ”€â”€ Dockerfile         # InstruÃ§Ãµes para construir a imagem da API
â”‚   â””â”€â”€ requirements.txt   # DependÃªncias Python da API
â”œâ”€â”€ simulator/             # Simulador de Sensores
â”‚   â”œâ”€â”€ simulator.py       # Script que gera e envia dados
â”‚   â”œâ”€â”€ Dockerfile         # InstruÃ§Ãµes para construir a imagem do simulador
â”‚   â””â”€â”€ requirements.txt   # DependÃªncias do simulador
â”œâ”€â”€ docker-compose.yml     # Orquestra todos os serviÃ§os
â””â”€â”€ README.md              # Este arquivo


### ğŸš€ Como Executar

Siga estes 3 passos para colocar todo o sistema no ar.

#### 1. PrÃ©-requisitos
Garanta que o **Docker Desktop** esteja instalado e em execuÃ§Ã£o na sua mÃ¡quina.

#### 2. Clone o RepositÃ³rio
Abra um terminal e clone o projeto para sua mÃ¡quina local.
```bash
git clone <URL_DO_SEU_REPOSITORIO>
3. Inicie os ServiÃ§os
Navegue atÃ© a pasta do projeto e execute o Docker Compose.

Bash

cd <NOME_DA_PASTA_DO_PROJETO>
docker compose up --build
Aguarde a inicializaÃ§Ã£o. O terminal exibirÃ¡ os logs dos serviÃ§os. A primeira vez pode demorar alguns minutos.

âœ… VerificaÃ§Ã£o e Teste
Para confirmar que tudo estÃ¡ funcionando, acesse a documentaÃ§Ã£o da API no seu navegador: http://localhost:8000/docs. Teste os endpoints GET /praias/ e GET /alertas/.

ğŸ“± Funcionalidades Mobile (IntegraÃ§Ã£o com App Inventor)
Para que seu aplicativo no celular se conecte Ã  API:

Encontre o IP do seu Computador: Seu PC e celular precisam estar na mesma rede Wi-Fi. O app nÃ£o entende localhost.

No Windows: Abra o CMD, digite ipconfig e procure pelo "EndereÃ§o IPv4".

No macOS/Linux: Abra o terminal, digite ifconfig ou ip a.

Configure a URL nos Blocos: Nos blocos do App Inventor, onde vocÃª configura a URL dos componentes Web, use o IP encontrado.

Exemplo: http://192.168.0.15:8000/alertas/

Firewall: Se o app nÃ£o conectar, o Firewall do seu PC pode estar bloqueando a porta. Crie uma "Regra de Entrada" no Firewall do Windows para permitir conexÃµes TCP na porta 8000, ou mude o perfil da sua rede para "Particular".

ğŸ”§ ConfiguraÃ§Ã£o (VariÃ¡veis de Ambiente)
As variÃ¡veis de ambiente sÃ£o gerenciadas no arquivo docker-compose.yml:

POSTGRES_USER, POSTGRES_PASSWORD, POSTGRES_DB: Credenciais do banco de dados.

DATABASE_URL: URL de conexÃ£o usada pela API para encontrar o banco de dados.

API_URL: URL usada pelo simulador para encontrar a API.

ğŸ“Š Dados Monitorados
A plataforma foi projetada para rastrear:

LocalizaÃ§Ã£o e metadados de praias.

Leituras de sensores (foco em enterococos e temperatura_agua).

HistÃ³rico de alertas gerados, com nÃ­vel de risco e mensagem.

ğŸ¤ ContribuiÃ§Ã£o
FaÃ§a um Fork do projeto.

Crie uma branch para sua feature (git checkout -b feature/NovaFeature).

FaÃ§a o commit de suas mudanÃ§as (git commit -m 'Adiciona NovaFeature').

FaÃ§a o push para a branch (git push origin feature/NovaFeature).

Abra um Pull Request.

ğŸ“„ LicenÃ§a
Este projeto estÃ¡ sob a licenÃ§a MIT.

ğŸ“ Contato
Para dÃºvidas ou sugestÃµes, abra uma Issue no repositÃ³rio.

Qualidade da Ãgua - Monitorando nossos mares para um futuro mais seguro. ğŸŒŠ
